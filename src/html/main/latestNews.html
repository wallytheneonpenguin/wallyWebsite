<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Welcome to Wally's Lair</title>
  <link rel="stylesheet" href="../../css/main.css">
</head>
<body>

    <table id="data-table">
    <thead>
    <tr id="table-head"></tr>
    </thead>
    <tbody id="table-body"></tbody>
    </table>

<script type="module">
  import { createClient } from 'https://esm.sh/@supabase/supabase-js'
  import dayjs from 'https://esm.sh/dayjs';
 
  const supabase = createClient('https://wqoizupthpyffpoflwjn.supabase.co', 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Indxb2l6dXB0aHB5ZmZwb2Zsd2puIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAzNDMwNTUsImV4cCI6MjA2NTkxOTA1NX0.FdDPG9OtIXgb70ZgT2Vc1enkDgUnryxpb53QRfUg-iE');

  const { data, error } = await supabase.from('latest_news').select();

  console.log(data);

      const headers = Object.keys(data[0]);

  const tbody = document.getElementById('table-body');

      tbody.innerHTML = data.map(row => `
        <tr><td>${dayjs(row.created_date.format('YYYY-MM-DD HH:mm'))}</td></tr>
        <tr><td>${row.news_title}</td></tr>
        <tr><td>${row.news_description}</td></tr>
        <tr><td></td></tr>`).join('');

</script>
</body>

</html>